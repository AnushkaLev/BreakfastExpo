<!doctype html>

<html lang="en">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />

  <title>Breakfast Rating App - Preview</title>

  <style>

    :root{
      --bg: #fbf6ef;
      --wallTop: #fffaf4;
      --wallBot: #fff3e8;

      --ink: rgba(120,110,100,.45);
      --inkSoft: rgba(120,110,100,.28);

      --woodTop:#f3caa6;
      --woodBot:#efbe95;

      --counter:#f6eadf;
      --counterEdge:#e2d3c6;

      --stove:#5b5b60;

      --potBody:#f5f1ea;
      --potLid:#f0c16a;

      --sinkFill:#bfc3c7;
      --sinkInner:#aeb3b8;

      --green1:#bfe3b9;
      --green2:#9fd39f;
      --green3:#7fc58d;

      --cream:#f3f1ea;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body{
      margin:0;
      background: var(--bg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x: hidden;
    }

    .container {
      width: 100vw;
      min-height: 100vh;
      position: relative;
      padding: 18px 0;
    }

    .frame{
      width:min(900px, 96vw);
      aspect-ratio: 1.18 / 1;
      border-radius: 16px;
      overflow:hidden;
      box-shadow: 0 16px 40px rgba(0,0,0,.10);
      background: var(--bg);
      margin: 0 auto;
      position: relative;
    }

    svg{ width:100%; height:100%; display:block; }

    /* Top-right nav (Home + Weekly Summary in the corner) */
    .screen-toggle {
      position: fixed;
      top: 18px;
      right: 18px;
      z-index: 1000;
      display: flex;
      gap: 10px;
    }

    .toggle-btn {
      padding: 10px 16px;
      background: rgba(255, 255, 255, 0.92);
      border: 2px solid #FFB800;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      color: #333;
      font-size: 14px;
      box-shadow: 0 6px 18px rgba(0,0,0,.10);
    }

    .toggle-btn.active {
      background: #FFB800;
      color: #333;
    }

    /* Screen Containers */
    .screen {
      display: none;
      position: absolute;
      inset: 0;
      z-index: 10;
    }

    .screen.active { display: block; }

    /* HOME: kitchen background + circular live camera + 3 buttons */
    .home-screen {
      height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .camera-ui {
      width: min(520px, 88%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 18px;
    }

    .camera-title {
      text-align: center;
      margin-bottom: 6px;
    }

    .camera-title h1{
      font-size: 34px;
      font-weight: 800;
      color: #333;
      text-shadow: 0 2px 4px rgba(255, 255, 255, 0.85);
      letter-spacing: -0.5px;
    }

    .camera-title p{
      margin-top: 6px;
      font-size: 15px;
      color: #666;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.85);
    }

    .camera-circle {
      width: min(360px, 72vw);
      aspect-ratio: 1 / 1;
      border-radius: 999px;
      background: rgba(255,255,255,.70);
      border: 10px solid rgba(255,255,255,.85);
      box-shadow: 0 14px 36px rgba(0,0,0,.14);
      position: relative;
      overflow: hidden;
    }

    .camera-circle video,
    .camera-circle img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scaleX(-1); /* selfie-like */
    }

    .camera-circle .hint {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      background: linear-gradient(to bottom, rgba(255,255,255,.45), rgba(255,255,255,.15));
      color: rgba(70,60,55,.78);
      font-weight: 700;
      text-align: center;
      padding: 18px;
      pointer-events: none;
    }

    .camera-controls {
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: center;
    }

    .circle-btn {
      width: 62px;
      height: 62px;
      border-radius: 999px;
      border: 3px solid rgba(255,255,255,.85);
      background: rgba(255,255,255,.92);
      box-shadow: 0 10px 22px rgba(0,0,0,.14);
      cursor: pointer;
      font-size: 22px;
      display: grid;
      place-items: center;
      transition: transform .15s ease, box-shadow .15s ease;
      user-select: none;
    }

    .circle-btn:hover { transform: translateY(-2px); box-shadow: 0 14px 26px rgba(0,0,0,.18); }
    .circle-btn:active { transform: translateY(0px) scale(.98); }

    .circle-btn.check { color: #1B7A2A; border-color: rgba(27,122,42,.25); }
    .circle-btn.camera { color: #333; border-color: rgba(255,184,0,.30); }
    .circle-btn.redo { color: #333; border-color: rgba(120,110,100,.25); }

    .status-line {
      font-size: 13px;
      font-weight: 700;
      color: rgba(70,60,55,.70);
      text-shadow: 0 1px 2px rgba(255,255,255,.85);
      text-align: center;
      min-height: 18px;
    }

    /* Rating + notes section under the camera */
    .rating-notes {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .rating-label {
      font-size: 13px;
      font-weight: 600;
      color: rgba(70,60,55,.80);
      text-shadow: 0 1px 2px rgba(255,255,255,.85);
    }

    .rating-stars {
      display: flex;
      gap: 6px;
    }

    .rating-star {
      font-size: 26px;
      cursor: pointer;
      color: #D8D5CF;
      transition: transform .12s ease, color .12s ease;
      text-shadow: 0 1px 2px rgba(0,0,0,.08);
      user-select: none;
    }

    .rating-star.selected {
      color: #FFB800;
      transform: translateY(-1px);
    }

    .notes-input {
      width: 100%;
      max-width: 420px;
      min-height: 70px;
      border-radius: 12px;
      border: 1px solid rgba(140,125,110,.25);
      padding: 10px 12px;
      font-size: 13px;
      resize: vertical;
      background: rgba(255,255,255,.85);
      box-shadow: 0 4px 10px rgba(0,0,0,.04);
      outline: none;
    }

    .notes-input:focus {
      border-color: #FFB800;
      box-shadow: 0 0 0 1px rgba(255,184,0,.55), 0 6px 14px rgba(0,0,0,.10);
    }

    /* Weekly Summary Screen */

    .weekly-screen {

      padding-top: 20px;

      padding-bottom: 20px;

      height: 100%;

      overflow-y: auto;

    }

    .header {

      text-align: center;

      margin-bottom: 16px;

    }

    .header-title {

      font-size: 28px;

      font-weight: 700;

      color: #333;

      margin-bottom: 4px;

      text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);

    }

    .week-range {

      font-size: 14px;

      color: #666;

      font-weight: 500;

      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);

    }

    .stats-card {

      background: rgba(255, 255, 255, 0.95);

      border-radius: 12px;

      padding: 16px;

      margin: 0 auto 20px;

      max-width: 400px;

      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);

    }

    .stats-row {

      display: flex;

      justify-content: space-around;

      margin-bottom: 12px;

    }

    .stat-item {

      text-align: center;

    }

    .stat-value {

      font-size: 24px;

      font-weight: 700;

      color: #333;

      margin-bottom: 4px;

    }

    .stat-label {

      font-size: 12px;

      color: #666;

      font-weight: 500;

    }

    .bottles-container {
      position: absolute;
      bottom: 92px; /* sits on the counter area visually */
      left: 0;
      width: 100%;
      padding: 0 20px;
    }

    .bottles-title {

      font-size: 18px;

      font-weight: 700;

      color: #333;

      text-align: center;

      margin-bottom: 16px;

      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);

    }

    .bottles-row {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* Spice Bottle */

    .spice-bottle {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: transform 0.2s;
      width: 70px;
    }

    .spice-bottle:hover {

      transform: translateY(-5px) scale(1.05);

    }

    .bottle-cap {

      width: 52px;

      height: 10px;

      background: linear-gradient(to bottom, #B0B0B0 0%, #D0D0D0 100%);

      border-radius: 4px 4px 0 0;

      margin-bottom: 2px;

    }

    .bottle-body {

      width: 60px;

      height: 120px;

      background: rgba(255, 255, 255, 0.25);

      border: 1px solid rgba(200, 200, 200, 0.6);

      border-radius: 8px;

      position: relative;

      overflow: hidden;

      box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.4), 0 2px 4px rgba(0, 0, 0, 0.1);

    }

    .bottle-fill {

      position: absolute;

      bottom: 0;

      left: 2px;

      right: 2px;

      border-radius: 0 0 6px 6px;

      transition: height 0.3s ease;

    }

    .bottle-label {

      position: absolute;

      top: 6px;

      left: 7.5%;

      width: 85%;

      background: rgba(255, 255, 255, 0.98);

      border-radius: 6px;

      padding: 5px 3px;

      border: 1px solid rgba(0, 0, 0, 0.12);

      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);

      display: flex;

      flex-direction: column;

      align-items: center;

      justify-content: space-between;

      min-height: 85px;

    }

    .weekday-label {

      font-size: 8px;

      font-weight: 700;

      color: #666;

      margin-bottom: 3px;

      letter-spacing: 0.5px;

    }

    .thumbnail {
      width: 30px;
      height: 30px;
      border-radius: 4px;
      margin: 3px 0;
      border: 1px solid rgba(0, 0, 0, 0.1);
      background: rgba(0, 0, 0, 0.03);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      overflow: hidden;
    }

    .thumbnail img {
      width: 100%;
      height: 100%;
      border-radius: inherit;
      object-fit: cover;
      display: block;
    }

    .stars {

      display: flex;

      gap: 1px;

      margin: 2px 0;

    }

    .star {

      font-size: 8px;

      color: #DDD;

    }

    .star.filled {

      color: #FFB800;

    }

    .food-label {
      font-size: 7px;
      color: #333;
      font-weight: 600;
      text-align: center;
      margin-top: 2px;
      letter-spacing: 0.3px;
    }

    .empty-label {

      font-size: 10px;

      color: #999;

      font-style: italic;

      margin-top: 8px;

    }

    /* Fill Colors */

    .fill-eggs { background-color: #FFE5B4; }

    .fill-oatmeal { background-color: #F5E6D3; }

    .fill-chia { background-color: #D4C4E8; }

    .fill-fruit { background-color: #E8F5E8; }

    .fill-yogurt { background-color: #E8F0FF; }

    .fill-default { background-color: #E8D5C4; }

    /* iOS WebView fixes to match desktop */
    @media screen and (max-width: 500px) {
      /* Ensure top-right buttons are visible on mobile - higher z-index */
      .screen-toggle {
        top: 12px;
        right: 12px;
        gap: 8px;
        z-index: 1000;
        position: fixed !important;
        display: flex !important;
      }

      .toggle-btn {
        padding: 8px 12px;
        font-size: 13px;
        white-space: nowrap;
      }

      /* Fix camera circle size and centering on mobile - match desktop proportions */
      .camera-circle {
        width: min(360px, 72vw) !important;
        aspect-ratio: 1 / 1 !important;
        max-width: 360px;
      }

      .camera-ui {
        width: min(520px, 88%) !important;
        gap: 18px;
        align-items: center;
        justify-content: center;
      }

      /* Ensure proper vertical centering - match desktop */
      .home-screen {
        padding: 24px 16px;
        display: grid !important;
        place-items: center !important;
      }

      /* Fix text scaling - maintain desktop proportions */
      .camera-title h1 {
        font-size: 34px;
        letter-spacing: -0.5px;
      }

      .camera-title p {
        font-size: 15px;
      }

      /* Ensure frame doesn't overflow but maintains aspect */
      .frame {
        width: 100vw;
        max-width: 100vw;
        margin: 0;
        border-radius: 0;
        aspect-ratio: 1.18 / 1;
      }

      .container {
        padding: 0;
      }
    }

    /* iPhone 16 Pro specific (393px width) */
    @media screen and (max-width: 393px) and (max-height: 852px) {
      .camera-circle {
        width: min(340px, 72vw) !important;
      }

      .camera-ui {
        width: min(500px, 88%) !important;
      }

      .screen-toggle {
        top: 10px;
        right: 10px;
        z-index: 1000;
      }

      .camera-title h1 {
        font-size: 32px;
      }
    }

  </style>

</head>

<body>

  <div class="container">

    <!-- Screen Toggle -->

    <div class="screen-toggle">

      <button class="toggle-btn active" onclick="showScreen('home')">Home</button>

      <button class="toggle-btn" onclick="showScreen('weekly')">Weekly Summary</button>

    </div>

    <div class="frame">

      <!-- Kitchen Background SVG -->

      <svg viewBox="0 0 1000 850" xmlns="http://www.w3.org/2000/svg">

        <defs>

          <filter id="grain">

            <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch" />

            <feColorMatrix type="matrix"

              values="0 0 0 0 0

                      0 0 0 0 0

                      0 0 0 0 0

                      0 0 0 .055 0"/>

          </filter>

          <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">

            <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0,0,0,.12)"/>

          </filter>

          <linearGradient id="wallGrad" x1="0" x2="0" y1="0" y2="1">

            <stop offset="0" stop-color="var(--wallTop)"/>

            <stop offset="1" stop-color="var(--wallBot)"/>

          </linearGradient>

          <linearGradient id="woodGrad" x1="0" x2="0" y1="0" y2="1">

            <stop offset="0" stop-color="var(--woodTop)"/>

            <stop offset="1" stop-color="var(--woodBot)"/>

          </linearGradient>

          <linearGradient id="outside" x1="0" x2="0" y1="0" y2="1">

            <stop offset="0" stop-color="#cfead0"/>

            <stop offset="1" stop-color="#a8d8ac"/>

          </linearGradient>

        </defs>

        <!-- WALL -->

        <rect x="0" y="0" width="1000" height="850" fill="url(#wallGrad)"/>

        <rect x="0" y="0" width="1000" height="850" filter="url(#grain)" opacity=".9"/>

        <!-- WINDOW -->

        <g filter="url(#softShadow)">

          <rect x="70" y="70" rx="22" ry="22" width="520" height="260"

                fill="#fff" stroke="var(--inkSoft)" stroke-width="5"/>

          <rect x="92" y="92" rx="18" ry="18" width="476" height="216"

                fill="url(#outside)" stroke="rgba(120,110,100,.16)" stroke-width="2"/>

          <path d="M92 250 C180 205, 265 225, 340 245 C420 210, 500 220, 568 245

                   L568 308 L92 308 Z"

                fill="var(--green1)" opacity=".85"/>

          <path d="M92 276 C190 245, 280 270, 350 285 C430 250, 500 260, 568 280

                   L568 308 L92 308 Z"

                fill="var(--green2)" opacity=".70"/>

          <line x1="330" y1="92" x2="330" y2="308" stroke="rgba(120,110,100,.20)" stroke-width="6"/>

        </g>

        <!-- SHELF + ITEMS -->

        <g>

          <rect x="755" y="132" width="170" height="20" rx="10" fill="#e7c9a4" opacity=".85"/>

          <g transform="translate(755 -36) scale(0.8 1)">

            <path d="M26 92 C26 66, 56 54, 78 60 C98 64, 98 74, 98 92 L98 140

                     C98 158, 86 168, 62 168 C38 168, 26 158, 26 140 Z"

                  fill="var(--cream)" stroke="rgba(120,110,100,.22)" stroke-width="3"/>

            <path d="M98 95 C118 98, 120 122, 104 128" fill="none"

                  stroke="rgba(120,110,100,.30)" stroke-width="6" stroke-linecap="round"/>

            <rect x="50" y="46" width="26" height="18" rx="7"

                  fill="var(--cream)" stroke="rgba(120,110,100,.22)" stroke-width="3"/>

          </g>

          <g transform="translate(847 86.4) scale(0.40)">

            <path d="M0 40 C0 18, 22 8, 38 10 C58 12, 68 20, 68 40 L68 86

                     C68 100, 56 112, 34 112 C12 112, 0 100, 0 86 Z"

                  fill="#e9c8a9" stroke="rgba(120,110,100,.20)" stroke-width="3"/>

            <rect x="14" y="0" width="40" height="18" rx="9" fill="#d7b092" opacity=".9"/>

            <path d="M18 60 C26 52, 42 52, 52 60" stroke="rgba(120,110,100,.16)" stroke-width="3" fill="none"/>

          </g>

          <g transform="translate(876 86.4) scale(0.40)">

            <path d="M0 42 C0 20, 22 10, 38 12 C58 14, 68 22, 68 42 L68 88

                     C68 102, 56 114, 34 114 C12 114, 0 102, 0 88 Z"

                  fill="#e9c8a9" stroke="rgba(120,110,100,.20)" stroke-width="3"/>

            <rect x="14" y="2" width="40" height="18" rx="9" fill="#d7b092" opacity=".9"/>

            <path d="M18 62 C26 54, 42 54, 52 62" stroke="rgba(120,110,100,.16)" stroke-width="3" fill="none"/>

          </g>

        </g>

        <!-- COUNTER -->

        <g>

          <rect x="0" y="380" width="1000" height="170" fill="var(--counter)"/>

          <rect x="0" y="372" width="1000" height="10" fill="var(--counterEdge)" opacity=".9"/>

          <line x1="0" y1="550" x2="1000" y2="550" stroke="rgba(120,110,100,.20)" stroke-width="3"/>

        </g>

        <!-- STOVE + POT -->

        <g filter="url(#softShadow)">

          <rect x="70" y="412" width="260" height="110" rx="14" fill="var(--stove)"/>

          <rect x="92" y="504" width="40" height="8" rx="4" fill="rgba(255,255,255,.22)"/>

          <rect x="140" y="504" width="30" height="8" rx="4" fill="rgba(255,255,255,.16)"/>

          <rect x="178" y="504" width="32" height="8" rx="4" fill="rgba(255,255,255,.13)"/>

          <g transform="translate(130 330)">

            <ellipse cx="70" cy="150" rx="74" ry="14" fill="rgba(235,110,70,.35)"/>

            <path d="M20 92 C20 62, 44 48, 70 48 C96 48, 120 62, 120 92

                     L120 130 C120 150, 100 162, 70 162 C40 162, 20 150, 20 130 Z"

                  fill="var(--potBody)" stroke="rgba(120,110,100,.26)" stroke-width="3"/>

            <path d="M26 76 C34 54, 54 44, 70 44 C86 44, 106 54, 114 76

                     C96 84, 44 84, 26 76 Z"

                  fill="var(--potLid)" stroke="rgba(120,110,100,.22)" stroke-width="3"/>

            <circle cx="70" cy="42" r="9" fill="var(--potLid)" stroke="rgba(120,110,100,.22)" stroke-width="3"/>

            <path d="M16 110 C2 108, 2 130, 16 128" fill="none"

                  stroke="rgba(120,110,100,.30)" stroke-width="7" stroke-linecap="round"/>

            <path d="M124 110 C138 108, 138 130, 124 128" fill="none"

                  stroke="rgba(120,110,100,.30)" stroke-width="7" stroke-linecap="round"/>

          </g>

        </g>

        <!-- BOWLS -->

        <g filter="url(#softShadow)" opacity=".96">

          <ellipse cx="405" cy="520" rx="58" ry="12" fill="rgba(0,0,0,.10)"/>

          <path d="M346 480 C346 454, 372 440, 405 440 C438 440, 464 454, 464 480

                   C464 512, 438 528, 405 528 C372 528, 346 512, 346 480 Z"

                fill="var(--cream)" stroke="rgba(120,110,100,.20)" stroke-width="3"/>

          <path d="M360 490 C382 502, 430 502, 450 490" fill="none"

                stroke="rgba(120,110,100,.14)" stroke-width="3"/>

          <g transform="translate(35 0)">

            <ellipse cx="478" cy="498" rx="42" ry="10" fill="rgba(0,0,0,.08)"/>

            <path d="M436 472 C436 452, 454 440, 478 440 C502 440, 520 452, 520 472

                     C520 496, 502 510, 478 510 C454 510, 436 496, 436 472 Z"

                  fill="var(--cream)" stroke="rgba(120,110,100,.20)" stroke-width="3"/>

            <path d="M448 474 C462 486, 494 486, 510 474" fill="none"

                  stroke="rgba(120,110,100,.14)" stroke-width="3"/>

          </g>

        </g>

        <!-- SINK + FAUCET -->

        <g filter="url(#softShadow)">

          <rect x="640" y="425" width="240" height="95" rx="18"

                fill="var(--sinkFill)" stroke="rgba(120,110,100,.22)" stroke-width="3"/>

          <rect x="662" y="445" width="196" height="55" rx="14"

                fill="var(--sinkInner)" opacity=".40"/>

          <ellipse cx="760" cy="425" rx="18" ry="6" fill="rgba(0,0,0,.08)"/>

          <path d="M760 425

                   L760 352

                   C760 334, 778 328, 794 334

                   C806 339, 808 370, 800 360"

                fill="none" stroke="rgba(120,110,100,.42)" stroke-width="18" stroke-linecap="round"/>

          <path d="M750 400 C742 400, 730 405, 740 410"

                fill="none" stroke="rgba(120,110,100,.40)" stroke-width="10" stroke-linecap="round"/>

          <path d="M840 448 C848 456, 848 488, 840 496"

                stroke="rgba(120,110,100,.18)" stroke-width="4" fill="none" stroke-linecap="round"/>

        </g>

        <!-- VEGGIE BOWL -->

        <g filter="url(#softShadow)">

          <ellipse cx="935" cy="520" rx="55" ry="12" fill="rgba(0,0,0,.10)"/>

          <path d="M885 480 C885 455, 905 440, 935 440 C965 440, 985 455, 985 480

                   C985 510, 965 528, 935 528 C905 528, 885 510, 885 480 Z"

                fill="var(--cream)" stroke="rgba(120,110,100,.20)" stroke-width="3"/>

          <g transform="translate(935 492)">

            <path d="M-28 -18

                     C-18 -38, 10 -40, 20 -26

                     C34 -42, 58 -26, 44 -10

                     C62 -6, 54 18, 30 14

                     C20 34, -6 32, -10 14

                     C-30 26, -54 8, -44 -10

                     C-64 -14, -52 -34, -28 -18 Z"

                  fill="var(--green1)" opacity=".92"/>

            <path d="M-18 -14

                     C-10 -30, 10 -30, 18 -18

                     C28 -28, 44 -18, 34 -6

                     C46 -2, 38 14, 22 12

                     C16 24, -2 24, -6 12

                     C-20 18, -34 6, -28 -6

                     C-44 -10, -34 -26, -18 -14 Z"

                  fill="var(--green2)" opacity=".80"/>

            <path d="M-14 -6

                     C-6 -18, 8 -18, 14 -10

                     C20 -18, 30 -10, 24 0

                     C34 6, 26 18, 14 14

                     C8 22, -4 20, -6 12

                     C-18 16, -26 4, -14 -6 Z"

                  fill="var(--green3)" opacity=".55"/>

            <circle cx="-10" cy="10" r="11.5" fill="rgba(215,70,60,.90)"/>

            <circle cx="10"  cy="10" r="11.5" fill="rgba(215,70,60,.90)"/>

          </g>

        </g>

        <!-- CABINETS -->

        <g>

          <rect x="0" y="550" width="1000" height="300" fill="url(#woodGrad)"/>

          <g stroke="rgba(120,110,100,.20)" stroke-width="4" fill="none">

            <rect x="40"  y="585" width="210" height="235" rx="10"/>

            <rect x="270" y="585" width="210" height="235" rx="10"/>

            <rect x="500" y="585" width="210" height="235" rx="10"/>

            <rect x="730" y="585" width="230" height="235" rx="10"/>

          </g>

          <g stroke="rgba(120,110,100,.33)" stroke-width="10" stroke-linecap="round">

            <line x1="190" y1="695" x2="190" y2="730"/>

            <line x1="320" y1="695" x2="320" y2="730"/>

            <line x1="650" y1="695" x2="650" y2="730"/>

            <line x1="780" y1="695" x2="780" y2="730"/>

          </g>

          <g stroke="rgba(120,110,100,.12)" stroke-width="3" stroke-linecap="round">

            <path d="M120 650 l0 40" />

            <path d="M410 640 l0 50" />

            <path d="M590 650 l0 45" />

            <path d="M900 635 l0 55" />

          </g>

        </g>

        <rect x="0" y="830" width="1000" height="20" fill="#f3d36e" opacity=".35"/>

      </svg>

      <!-- Home Screen -->

      <div id="home-screen" class="screen active">

        <div class="home-screen">
          <div class="camera-ui">
            <div class="camera-title">
              <h1>Breakfast Rating</h1>
              <p>Center your plate/bowl in the circle</p>
            </div>

            <div class="camera-circle" aria-label="Camera Preview">
              <video id="cameraVideo" autoplay playsinline muted></video>
              <img id="capturedImage" alt="Captured" style="display:none;" />
              <div id="cameraHint" class="hint">
                Enable camera access to see a live preview.<br/>
                (If blocked, click the lock icon in your browser address bar.)
              </div>
            </div>

            <div class="camera-controls" aria-label="Camera Controls">
              <button class="circle-btn camera" id="btnCapture" title="Capture">üì∏</button>
              <button class="circle-btn check" id="btnConfirm" title="Confirm">‚úÖ</button>
              <button class="circle-btn redo" id="btnRedo" title="Retake">‚Üª</button>
            </div>

            <div class="status-line" id="statusLine"></div>

            <div class="rating-notes" aria-label="Rating and notes">
              <div class="rating-label">How was this breakfast?</div>
              <div class="rating-stars" id="ratingStars">
                <span class="rating-star" data-value="1">‚òÖ</span>
                <span class="rating-star" data-value="2">‚òÖ</span>
                <span class="rating-star" data-value="3">‚òÖ</span>
                <span class="rating-star" data-value="4">‚òÖ</span>
                <span class="rating-star" data-value="5">‚òÖ</span>
              </div>
              <textarea
                id="notesInput"
                class="notes-input"
                placeholder="Add a quick note‚Ä¶ e.g. ‚Äúchia pudding with berries, felt light but filling‚Äù"
              ></textarea>
            </div>
          </div>

        </div>

      </div>

      <!-- Weekly Summary Screen -->

      <div id="weekly-screen" class="screen">

        <div class="weekly-screen">

          <div class="header">

            <h2 class="header-title">Weekly Summary</h2>

            <p class="week-range" id="weekRangeLabel">Mon - Sun</p>

          </div>

          <div class="stats-card">
            <div class="stats-row">
              <div class="stat-item">
                <div class="stat-value" id="statTotalBreakfasts">0</div>
                <div class="stat-label">Breakfasts</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="statAvgRating">‚Äî</div>
                <div class="stat-label">Avg Rating</div>
              </div>
            </div>
          </div>

          <div class="bottles-container">

            <h3 class="bottles-title">This Week's Breakfasts</h3>

            <div class="bottles-row">

              <!-- Monday -->

              <div class="spice-bottle" onclick="alert('Monday: Scrambled Eggs - 4 stars')">

                <div class="bottle-cap"></div>

                <div class="bottle-body">

                  <div class="bottle-fill fill-eggs" style="height: 60%;"></div>

                  <div class="bottle-label">

                    <div class="weekday-label">MON</div>

                    <div class="thumbnail">üç≥</div>

                    <div class="stars">

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star">‚òÖ</span>

                    </div>

                    <div class="food-label">EGGS</div>

                  </div>

                </div>

              </div>

              <!-- Tuesday -->

              <div class="spice-bottle" onclick="alert('Tuesday: Oatmeal - 5 stars')">

                <div class="bottle-cap"></div>

                <div class="bottle-body">

                  <div class="bottle-fill fill-oatmeal" style="height: 100%;"></div>

                  <div class="bottle-label">

                    <div class="weekday-label">TUE</div>

                    <div class="thumbnail">ü•£</div>

                    <div class="stars">

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                    </div>

                    <div class="food-label">OATMEAL</div>

                  </div>

                </div>

              </div>

              <!-- Wednesday -->

              <div class="spice-bottle" onclick="alert('Wednesday: Chia Pudding - 3 stars')">

                <div class="bottle-cap"></div>

                <div class="bottle-body">

                  <div class="bottle-fill fill-chia" style="height: 40%;"></div>

                  <div class="bottle-label">

                    <div class="weekday-label">WED</div>

                    <div class="thumbnail">üçÆ</div>

                    <div class="stars">

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star">‚òÖ</span>

                      <span class="star">‚òÖ</span>

                    </div>

                    <div class="food-label">CHIA PUD</div>

                  </div>

                </div>

              </div>

              <!-- Thursday -->

              <div class="spice-bottle" onclick="alert('Thursday: Fruit Bowl - 2 stars')">

                <div class="bottle-cap"></div>

                <div class="bottle-body">

                  <div class="bottle-fill fill-fruit" style="height: 20%;"></div>

                  <div class="bottle-label">

                    <div class="weekday-label">THU</div>

                    <div class="thumbnail">üçì</div>

                    <div class="stars">

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star">‚òÖ</span>

                      <span class="star">‚òÖ</span>

                      <span class="star">‚òÖ</span>

                    </div>

                    <div class="food-label">FRUIT</div>

                  </div>

                </div>

              </div>

              <!-- Friday -->

              <div class="spice-bottle" onclick="alert('Friday: No entry')">

                <div class="bottle-cap"></div>

                <div class="bottle-body">

                  <!-- empty fill + label + thumbnail + 5 grey stars by default -->
                  <div class="bottle-fill fill-default" style="height: 0%;"></div>

                  <div class="bottle-label">

                    <div class="weekday-label">FRI</div>

                    <div class="thumbnail"></div>

                    <div class="stars">
                      <span class="star">‚òÖ</span>
                      <span class="star">‚òÖ</span>
                      <span class="star">‚òÖ</span>
                      <span class="star">‚òÖ</span>
                      <span class="star">‚òÖ</span>
                    </div>

                    <div class="food-label"></div>

                    <div class="empty-label">‚Äî</div>

                  </div>

                </div>

              </div>

              <!-- Saturday -->

              <div class="spice-bottle" onclick="alert('Saturday: Yogurt - 4 stars')">

                <div class="bottle-cap"></div>

                <div class="bottle-body">

                  <div class="bottle-fill fill-yogurt" style="height: 60%;"></div>

                  <div class="bottle-label">

                    <div class="weekday-label">SAT</div>

                    <div class="thumbnail">ü•õ</div>

                    <div class="stars">

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star">‚òÖ</span>

                    </div>

                    <div class="food-label">YOGURT</div>

                  </div>

                </div>

              </div>

              <!-- Sunday -->

              <div class="spice-bottle" onclick="alert('Sunday: Pancakes - 5 stars')">

                <div class="bottle-cap"></div>

                <div class="bottle-body">

                  <div class="bottle-fill fill-eggs" style="height: 100%;"></div>

                  <div class="bottle-label">

                    <div class="weekday-label">SUN</div>

                    <div class="thumbnail">ü•û</div>

                    <div class="stars">

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                      <span class="star filled">‚òÖ</span>

                    </div>

                    <div class="food-label">PANCAKES</div>

                  </div>

                </div>

              </div>

            </div>

          </div>

        </div>

      </div>

    </div>

  </div>

  <script>

    let stream = null;
    let lastCaptureDataUrl = null;
    let currentRating = 0;
    const weekEntries = new Array(7).fill(null); // Mon=0 ... Sun=6

    const elVideo = () => document.getElementById('cameraVideo');
    const elImg = () => document.getElementById('capturedImage');
    const elHint = () => document.getElementById('cameraHint');
    const elStatus = () => document.getElementById('statusLine');

    function setStatus(msg) {
      const el = elStatus();
      if (el) el.textContent = msg || '';
    }

    async function startCamera() {
      try {
        if (stream) return;
        const constraints = {
          video: {
            facingMode: 'user',
            width: { ideal: 1280 },
            height: { ideal: 720 },
          },
          audio: false,
        };
        stream = await navigator.mediaDevices.getUserMedia(constraints);
        const v = elVideo();
        v.srcObject = stream;
        elHint().style.display = 'none';
        setStatus('Live camera ready. Tap üì∏ to capture.');
      } catch (e) {
        console.error(e);
        setStatus('Camera access blocked or unavailable.');
        const h = elHint();
        if (h) h.style.display = 'grid';
      }
    }

    function stopCamera() {
      if (!stream) return;
      stream.getTracks().forEach(t => t.stop());
      stream = null;
    }

    function captureFrame() {
      const v = elVideo();
      if (!v || !v.videoWidth) {
        setStatus('Camera not ready yet.');
        return;
      }

      const size = Math.min(v.videoWidth, v.videoHeight);
      const sx = (v.videoWidth - size) / 2;
      const sy = (v.videoHeight - size) / 2;

      const canvas = document.createElement('canvas');
      canvas.width = 720;
      canvas.height = 720;
      const ctx = canvas.getContext('2d');

      // Mirror to match the live preview mirroring
      ctx.translate(canvas.width, 0);
      ctx.scale(-1, 1);
      ctx.drawImage(v, sx, sy, size, size, 0, 0, canvas.width, canvas.height);

      lastCaptureDataUrl = canvas.toDataURL('image/jpeg', 0.9);
      const img = elImg();
      img.src = lastCaptureDataUrl;
      img.style.display = 'block';
      v.style.display = 'none';
      setStatus('Captured. Tap ‚úÖ to confirm or ‚Üª to retake.');
    }

    function redoCapture() {
      lastCaptureDataUrl = null;
      const v = elVideo();
      const img = elImg();
      if (img) img.style.display = 'none';
      if (v) v.style.display = 'block';
      setStatus('Retake: Tap üì∏ when ready.');
    }

    function confirmCapture() {
      if (!lastCaptureDataUrl) {
        setStatus('No photo captured yet. Tap üì∏ first.');
        return;
      }
      if (!currentRating) {
        setStatus('Choose a rating (tap a star) before confirming.');
        return;
      }
      const notes = (document.getElementById('notesInput') || {}).value || '';
      saveBreakfastEntry(currentRating, notes, lastCaptureDataUrl);
      setStatus(`Saved as ${currentRating}‚òÖ${notes ? ' with notes.' : '.'} It will appear in Weekly Summary.`);
      // After saving, return to live camera so you can take the next breakfast
      redoCapture();
      clearRatingAndNotes();
    }

    function saveBreakfastEntry(rating, notes, imageDataUrl) {
      const now = new Date();
      // Monday = 0 ... Sunday = 6
      const jsDay = now.getDay(); // 0=Sun .. 6=Sat
      const weekdayIndex = jsDay === 0 ? 6 : jsDay - 1;

      weekEntries[weekdayIndex] = {
        date: now,
        rating,
        notes,
        imageDataUrl,
      };

      renderWeekBottles();
      renderWeekStats();
    }

    function renderWeekBottles() {
      const bottleEls = Array.from(document.querySelectorAll('.spice-bottle'));
      const weekdayLabels = ['MON','TUE','WED','THU','FRI','SAT','SUN'];

      bottleEls.forEach((bottle, index) => {
        const entry = weekEntries[index];
        const labelEl = bottle.querySelector('.weekday-label');
        const fillEl = bottle.querySelector('.bottle-fill');
        const foodLabelEl = bottle.querySelector('.food-label');
        const emptyLabelEl = bottle.querySelector('.empty-label');
        const thumbEl = bottle.querySelector('.thumbnail');
        const stars = bottle.querySelectorAll('.star');

        if (labelEl) labelEl.textContent = weekdayLabels[index];

        if (!entry) {
          // Empty/default state for that day:
          // - 0% fill
          // - 5 grey stars
          // - no thumbnail
          // - no label text
          if (fillEl) fillEl.style.height = '0%';
          stars.forEach(s => s.classList.remove('filled'));
          if (foodLabelEl) foodLabelEl.textContent = '';
          if (emptyLabelEl) emptyLabelEl.textContent = '';
          if (thumbEl) {
            thumbEl.textContent = '';
            thumbEl.innerHTML = '';
          }
          return;
        }

        // Rating -> fill height: 1‚òÖ=20% ... 5‚òÖ=100%
        const fillPct = 20 + (entry.rating - 1) * 20;
        if (fillEl) fillEl.style.height = `${fillPct}%`;

        stars.forEach((star, i) => {
          if (i < entry.rating) star.classList.add('filled');
          else star.classList.remove('filled');
        });

        // Label: just a short snippet of the note (no \"Custom\" or auto keyword name)
        let label = '';
        if (entry.notes) {
          const trimmed = entry.notes.trim();
          label = trimmed.length > 12 ? trimmed.slice(0, 12) + '‚Ä¶' : trimmed;
        } else {
          label = 'Breakfast';
        }

        // Keep the case exactly as user typed in their note snippet
        if (foodLabelEl) foodLabelEl.textContent = label;
        if (emptyLabelEl) emptyLabelEl.textContent = '';
        // Thumbnail: show captured image if we have one, otherwise leave empty
        if (thumbEl) {
          thumbEl.textContent = '';
          thumbEl.innerHTML = '';
          if (entry.imageDataUrl) {
            const img = document.createElement('img');
            img.src = entry.imageDataUrl;
            img.alt = 'Breakfast thumbnail';
            thumbEl.appendChild(img);
          }
        }
      });
    }

    function renderWeekStats() {
      const totals = weekEntries.reduce(
        (acc, entry) => {
          if (!entry) return acc;
          acc.count += 1;
          acc.sumRating += entry.rating;
          return acc;
        },
        { count: 0, sumRating: 0 }
      );

      const totalEl = document.getElementById('statTotalBreakfasts');
      const avgEl = document.getElementById('statAvgRating');

      if (totalEl) totalEl.textContent = String(totals.count);

      if (avgEl) {
        if (!totals.count) {
          avgEl.textContent = '‚Äî';
        } else {
          const avg = totals.sumRating / totals.count;
          avgEl.textContent = avg.toFixed(1);
        }
      }
    }

    function updateStarUI() {
      const stars = document.querySelectorAll('.rating-star');
      stars.forEach((star) => {
        const value = Number(star.getAttribute('data-value') || 0);
        if (value <= currentRating) {
          star.classList.add('selected');
        } else {
          star.classList.remove('selected');
        }
      });
    }

    function clearRatingAndNotes() {
      currentRating = 0;
      updateStarUI();
      const notesEl = document.getElementById('notesInput');
      if (notesEl) notesEl.value = '';
    }

    function showScreen(screenName) {

      // Hide all screens

      document.querySelectorAll('.screen').forEach(screen => {

        screen.classList.remove('active');

      });

      

      // Remove active from all buttons

      document.querySelectorAll('.toggle-btn').forEach(btn => {

        btn.classList.remove('active');

      });

      

      // Show selected screen

      document.getElementById(screenName + '-screen').classList.add('active');

      

      // Activate button

      if (event && event.target) event.target.classList.add('active');

      if (screenName === 'home') {
        startCamera();
      }

    }

    // Wire up buttons
    document.addEventListener('DOMContentLoaded', () => {
      // Default screen: home
      startCamera();

      // Star rating interactions
      document.querySelectorAll('.rating-star').forEach(star => {
        star.addEventListener('click', (e) => {
          const value = Number(star.getAttribute('data-value') || 0);
          currentRating = value;
          updateStarUI();
          setStatus(`You chose ${currentRating}‚òÖ. Add a note or tap ‚úÖ to confirm.`);
        });
      });

      const b1 = document.getElementById('btnCapture');
      const b2 = document.getElementById('btnConfirm');
      const b3 = document.getElementById('btnRedo');

      if (b1) b1.addEventListener('click', (e) => { e.preventDefault(); captureFrame(); });
      if (b2) b2.addEventListener('click', (e) => { e.preventDefault(); confirmCapture(); });
      if (b3) b3.addEventListener('click', (e) => { e.preventDefault(); redoCapture(); });

      // Bottle interactions (weekly)
      document.querySelectorAll('.spice-bottle').forEach((bottle, idx) => {
        // Remove any old hard-coded inline onclick handlers from earlier demos
        bottle.removeAttribute('onclick');

        // Hover effects
        bottle.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-5px) scale(1.05)';
        });
        bottle.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0) scale(1)';
        });

        // Dynamic click: show what YOU actually saved for that day
        bottle.onclick = () => {
          const weekdayLabels = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];
          const entry = weekEntries[idx];
          if (!entry) {
            alert(`${weekdayLabels[idx]}: No log yet.`);
            return;
          }
          const note = (entry.notes || '').trim();
          const noteLine = note ? `\nNote: ${note}` : '';
          alert(`${weekdayLabels[idx]}: ${entry.rating}‚òÖ${noteLine}`);
        };
      });

      // Compute dynamic Monday‚ÄìSunday range label based on today's date
      const rangeEl = document.getElementById('weekRangeLabel');
      if (rangeEl) {
        const today = new Date();
        const jsDay = today.getDay(); // 0=Sun
        const diff = today.getDate() - jsDay + (jsDay === 0 ? -6 : 1); // Monday of this week
        const monday = new Date(today);
        monday.setDate(diff);
        const sunday = new Date(monday);
        sunday.setDate(monday.getDate() + 6);

        const fmt = (d) => d.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });
        rangeEl.textContent = `${fmt(monday)} - ${fmt(sunday)}`;
      }

      // Initial render for bottles & stats (keeps defaults but runs once)
      renderWeekBottles();
      renderWeekStats();
    });

  </script>

</body>

</html>
